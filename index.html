<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/1oupd4NwonWpdc5RocP5GQoY5SIyGFI_z_OIhWmjTKek/pub?output=csv";

async function fetchData() {
  const res = await fetch(CSV_URL);
  const text = await res.text();
  const rows = text.trim().split("\n").map(r => r.split(","));
  const data = {};
  for (let i = 1; i < rows.length; i++) {
    const name = rows[i][0];
    const pw = rows[i][1];
    const balance = rows[i][5]; // 6번째 열(F)
    data[name] = { pw, balance };
  }
  return data;
}

async function check() {
  const name = document.getElementById('name').value.trim();
  const pw = document.getElementById('pw').value.trim();
  const result = document.getElementById('result');

  const data = await fetchData();
  if (data[name] && data[name].pw === pw) {
    result.innerText = `${name}님의 잔여 지원금: ${data[name].balance}원`;
  } else {
    result.innerText = "이름이나 비밀번호가 틀렸습니다.";
  }
}
</script>
